---
title: Criar uma consulta para encontrar dados confidenciais armazenados em sites
ms.author: stephow
author: stephow-MSFT
manager: laurawi
ms.date: 6/29/2018
ms.audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MOE150
- MET150
ms.assetid: 3019fbc5-7f15-4972-8d0e-dc182dc7f836
description: Com a prevenção de perda de dados (DLP) no SharePoint Online, você pode descobrir documentos que contêm dados confidenciais em todo o locatário. Depois de descobrir os documentos, você pode trabalhar com os proprietários do documento para proteger os dados. Este tópico pode ajudá-lo a formar uma consulta para pesquisar dados confidenciais.
ms.openlocfilehash: 3dc1081d4627f1a26c50eed84f733c31a3f6c194
ms.sourcegitcommit: f57b4001ef1327f0ea622e716a4d7d78f1769b49
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/23/2019
ms.locfileid: "30217231"
---
# <a name="form-a-query-to-find-sensitive-data-stored-on-sites"></a><span data-ttu-id="6e25c-105">Criar uma consulta para encontrar dados confidenciais armazenados em sites</span><span class="sxs-lookup"><span data-stu-id="6e25c-105">Form a query to find sensitive data stored on sites</span></span>

<span data-ttu-id="6e25c-p102">Os usuários geralmente armazenam dados confidenciais, como números de cartão de crédito, números de seguridade social ou pessoais, em seus sites e com o passar do tempo, que pode expor uma organização a um risco significativo de perda de dados. Os documentos armazenados nos sites, incluindo os sites do OneDrive for Business, podem ser compartilhados com pessoas de fora da organização que não deveriam ter acesso às informações. Com a prevenção de perda de dados (DLP) no SharePoint Online, você pode descobrir documentos que contêm dados confidenciais em todo o locatário. Depois de descobrir os documentos, você pode trabalhar com os proprietários do documento para proteger os dados. Este tópico pode ajudá-lo a formar uma consulta para pesquisar dados confidenciais.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p102">Users often store sensitive data, such as credit card numbers, social security numbers, or personal, on their sites, and over time this can expose an organization to significant risk of data loss. Documents stored on sites—including OneDrive for Business sites—could be shared with people outside the organization who shouldn't have access to the information. With data loss prevention (DLP) in SharePoint Online, you can discover documents that contain sensitive data throughout your tenant. After discovering the documents, you can work with the document owners to protect the data. This topic can help you form a query to search for sensitive data.</span></span>
  
> [!NOTE]
> <span data-ttu-id="6e25c-111">A descoberta eletrônica, ou eDiscovery, e a DLP são recursos premium que exigem o [SharePoint Online plano 2](https://go.microsoft.com/fwlink/?LinkId=510080).</span><span class="sxs-lookup"><span data-stu-id="6e25c-111">Electronic discovery, or eDiscovery, and DLP are premium features that require [SharePoint Online Plan 2](https://go.microsoft.com/fwlink/?LinkId=510080).</span></span> 
  
## <a name="forming-a-basic-dlp-query"></a><span data-ttu-id="6e25c-112">Criando uma consulta básica de DLP</span><span class="sxs-lookup"><span data-stu-id="6e25c-112">Forming a basic DLP query</span></span>

<span data-ttu-id="6e25c-p103">Há três partes que compõem uma consulta de DLP básica: Sensitivetype, intervalo de contagem e intervalo de confiança. Conforme ilustrado no gráfico a seguir, **sensitivetype:\<"\>Type"** é necessário, e o**|\<intervalo\> de contagem** e o**|\<\> intervalo de confiança** são opcionais.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p103">There are three parts that make up a basic DLP query: SensitiveType, count range, and confidence range. As illustrated in the following graphic, **SensitiveType:"\<type\>"** is required, and both**|\<count range\>** and**|\<confidence range\>** are optional.</span></span> 
  
![Consulta de exemplo dividida em necessária e opcional](media/DLP-query-example-text.png)
  
### <a name="sensitive-type---required"></a><span data-ttu-id="6e25c-116">Tipo confidencial - necessário</span><span class="sxs-lookup"><span data-stu-id="6e25c-116">Sensitive type - required</span></span>

<span data-ttu-id="6e25c-p104">Então, o que é cada parte? As consultas de DLP do SharePoint normalmente começam `SensitiveType:"` com a propriedade e um nome de tipo de informação do [inventário de tipos de informações confidenciais](https://go.microsoft.com/fwlink/?LinkID=509999)e terminam com um `"`. Você também pode usar o nome de um [tipo de informação confidencial personalizado](create-a-custom-sensitive-information-type.md) que você criou para sua organização. Por exemplo, você pode estar procurando documentos que contenham números de cartão de crédito. Nesse caso, você usaria o seguinte formato: `SensitiveType:"Credit Card Number"`. Como você não incluiu o intervalo de contagem ou o intervalo de confiança, a consulta retorna todos os documentos nos quais um número de cartão de crédito é detectado. Esta é a consulta mais simples que você pode executar e retorna os resultados mais. Tenha em mente que a ortografia e o espaçamento do tipo confidencial são importantes.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p104">So what is each part? SharePoint DLP queries typically begin with the property  `SensitiveType:"` and an information type name from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999), and end with a  `"`. You can also use the name of a [custom sensitive information type](create-a-custom-sensitive-information-type.md) that you created for your organization. For example, you might be looking for documents that contain credit card numbers. In such an instance, you'd use the following format:  `SensitiveType:"Credit Card Number"`. Because you didn't include count range or confidence range, the query returns every document in which a credit card number is detected. This is the simplest query that you can run, and it returns the most results. Keep in mind that the spelling and spacing of the sensitive type matters.</span></span> 
  
### <a name="ranges---optional"></a><span data-ttu-id="6e25c-125">Intervalos - opcionais</span><span class="sxs-lookup"><span data-stu-id="6e25c-125">Ranges - optional</span></span>

<span data-ttu-id="6e25c-p105">Ambas as duas partes seguintes são intervalos, portanto, vamos examinar rapidamente a aparência de um intervalo. Nas consultas de DLP do SharePoint, um intervalo básico é representado por dois números separados por dois pontos, que tem a `[number]..[number]`seguinte aparência:. Por exemplo, se `10..20` for usado, esse intervalo capturaria números de 10 a 20. Há várias combinações de intervalo diferentes e várias são abordadas neste tópico.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p105">Both of the next two parts are ranges, so let's quickly examine what a range looks like. In SharePoint DLP queries, a basic range is represented by two numbers separated by two periods, which looks like this:  `[number]..[number]`. For instance, if  `10..20` is used, that range would capture numbers from 10 through 20. There are many different range combinations and several are covered in this topic.</span></span> 
  
<span data-ttu-id="6e25c-p106">Vamos adicionar um intervalo de contagem à consulta. Você pode usar o intervalo de contagem para definir o número de ocorrências de informações confidenciais que um documento precisa conter antes de ser incluído nos resultados da consulta. Por exemplo, se você quiser que a consulta retorne apenas documentos que contenham exatamente cinco números de cartão de `SensitiveType:"Credit Card Number|5"`crédito, use:. O intervalo de contagem também pode ajudá-lo a identificar documentos que representam altos graus de risco. Por exemplo, sua organização pode considerar documentos com cinco ou mais números de cartão de crédito em um alto risco. Para localizar documentos que estejam ajustando esse critério, você usaria esta `SensitiveType:"Credit Card Number|5.."`consulta:. Como alternativa, você pode encontrar documentos com cinco ou menos números de cartão de crédito usando esta consulta `SensitiveType:"Credit Card Number|..5"`:.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p106">Let's add a count range to the query. You can use count range to define the number of occurrences of sensitive information a document needs to contain before it's included in the query results. For example, if you want your query to return only documents that contain exactly five credit card numbers, use this:  `SensitiveType:"Credit Card Number|5"`. Count range can also help you identify documents that pose high degrees of risk. For example, your organization might consider documents with five or more credit card numbers a high risk. To find documents fitting this criterion, you would use this query:  `SensitiveType:"Credit Card Number|5.."`. Alternatively, you can find documents with five or fewer credit card numbers by using this query:  `SensitiveType:"Credit Card Number|..5"`.</span></span> 
  
#### <a name="confidence-range"></a><span data-ttu-id="6e25c-137">Intervalo de confiança</span><span class="sxs-lookup"><span data-stu-id="6e25c-137">Confidence range</span></span>

<span data-ttu-id="6e25c-p107">Por fim, o intervalo de confiança é o nível de confiança de que o tipo confidencial detectado é realmente uma correspondência. Os valores para o intervalo de confiança funcionam de forma semelhante ao intervalo de contagem. Você pode formar uma consulta sem incluir um intervalo de contagem. Por exemplo, para pesquisar documentos com qualquer número de números de cartão de crédito, contanto que o intervalo de confiança seja de 85% ou mais — você usaria esta `SensitiveType:"Credit Card Number|*|85.."`consulta:.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p107">Finally, confidence range is the level of confidence that the detected sensitive type is actually a match. The values for confidence range work similarly to count range. You can form a query without including a count range. For example, to search for documents with any number of credit card numbers—as long as the confidence range is 85 percent or higher—you would use this query:  `SensitiveType:"Credit Card Number|*|85.."`.</span></span> 
  
> [!IMPORTANT]
> <span data-ttu-id="6e25c-p108">O asterisco ( `*`) é um caractere curinga que significa que qualquer valor funciona. Você pode usar o caractere curinga ( `*`) tanto no intervalo de contagem quanto no intervalo de confiança, mas não em um tipo confidencial.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p108">The asterisk ( `*`) is a wildcard character that means any value works. You can use the wildcard character ( `*`) either in the count range or in the confidence range, but not in a sensitive type.</span></span> 
  
### <a name="additional-query-properties-and-search-operators-available-in-the-ediscovery-center"></a><span data-ttu-id="6e25c-144">Propriedades de pesquisa e operadores de consulta adicionais disponíveis no Centro de Descoberta Eletrônica</span><span class="sxs-lookup"><span data-stu-id="6e25c-144">Additional query properties and search operators available in the eDiscovery Center</span></span>

<span data-ttu-id="6e25c-p109">DLP no SharePoint também apresenta a propriedade LastSensitiveContentScan, que pode ajudá-lo a Pesquisar arquivos verificados dentro de um período específico. Para obter exemplos de consulta `LastSensitiveContentScan` com a propriedade, consulte os [exemplos de consultas complexas](form-a-query-to-find-sensitive-data-stored-on-sites.md#BKMK_ExamplesOfComplexQueries) na próxima seção.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p109">DLP in SharePoint also introduces the LastSensitiveContentScan property, which can help you search for files scanned within a specific timeframe. For query examples with the  `LastSensitiveContentScan` property, see the [Examples of complex queries](form-a-query-to-find-sensitive-data-stored-on-sites.md#BKMK_ExamplesOfComplexQueries) in the next section.</span></span> 
  
<span data-ttu-id="6e25c-p110">Você pode usar não apenas propriedades específicas de DLP para criar uma consulta, mas também Propriedades de pesquisa de descoberta eletrônica do `Author` SharePoint `FileExtension`padrão, como ou. Você pode usar operadores para criar consultas complexas. Para obter a lista de propriedades e operadores disponíveis, consulte o [usando as propriedades de pesquisa e os operadores com](https://go.microsoft.com/fwlink/?LinkId=510093) postagem do blog de descoberta eletrônica.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p110">You can use not only DLP-specific properties to create a query, but also standard SharePoint eDiscovery search properties such as  `Author` or  `FileExtension`. You can use operators to build complex queries. For the list of available properties and operators, see the [Using Search Properties and Operators with eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093) blog post.</span></span> 
  
## <a name="examples-of-complex-queries"></a><span data-ttu-id="6e25c-150">Exemplos</span><span class="sxs-lookup"><span data-stu-id="6e25c-150">Examples of complex queries</span></span>

<span data-ttu-id="6e25c-151">Os exemplos a seguir usam diferentes tipos confidenciais, propriedades e operadores para ilustrar como você pode refinar suas consultas para localizar exatamente o que você está procurando.</span><span class="sxs-lookup"><span data-stu-id="6e25c-151">The following examples use different sensitive types, properties, and operators to illustrate how you can refine your queries to find exactly what you're looking for.</span></span>
  
|<span data-ttu-id="6e25c-152">**Query**</span><span class="sxs-lookup"><span data-stu-id="6e25c-152">**Query**</span></span>|<span data-ttu-id="6e25c-153">**Explicação**</span><span class="sxs-lookup"><span data-stu-id="6e25c-153">**Explanation**</span></span>|
|:-----|:-----|
| `SensitiveType:"International Banking Account Number (IBAN)"` <br/> |<span data-ttu-id="6e25c-p111">O nome pode parecer estranho porque é muito longo, mas é o nome correto para esse tipo confidencial. Certifique-se de usar nomes exatos do [inventário de tipos de informações confidenciais](https://go.microsoft.com/fwlink/?LinkID=509999). Você também pode usar o nome de um [tipo de informação confidencial personalizado](create-a-custom-sensitive-information-type.md) que você criou para sua organização.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p111">The name might seem strange because it's so long, but it's the correct name for that sensitive type. Make sure to use exact names from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999). You can also use the name of a [custom sensitive information type](create-a-custom-sensitive-information-type.md) that you created for your organization.  </span></span><br/> |
| `SensitiveType:"Credit Card Number|1..4294967295|1..100"` <br/> |<span data-ttu-id="6e25c-p112">Isso retorna documentos com pelo menos uma correspondência para o tipo confidencial "número de cartão de crédito". Os valores de cada intervalo são os respectivos valores mínimo e máximo. Uma maneira mais simples de escrever essa consulta é `SensitiveType:"Credit Card Number"`, mas onde é a diversão?</span><span class="sxs-lookup"><span data-stu-id="6e25c-p112">This returns documents with at least one match to the sensitive type "Credit Card Number." The values for each range are the respective minimum and maximum values. A simpler way to write this query is  `SensitiveType:"Credit Card Number"`, but where's the fun in that?  </span></span><br/> |
| `SensitiveType:"Credit Card Number| 5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018"` <br/> |<span data-ttu-id="6e25c-160">Isso retorna documentos com números de cartão de crédito de 5-25 que foram verificados de 11 de agosto de 2018 até 13 de agosto de 2018.</span><span class="sxs-lookup"><span data-stu-id="6e25c-160">This returns documents with 5-25 credit card numbers that were scanned from August 11, 2018 through August 13, 2018.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number| 5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018" NOT FileExtension:XLSX` <br/> |<span data-ttu-id="6e25c-p113">Isso retorna documentos com números de cartão de crédito de 5-25 que foram verificados de 11 de agosto de 2018 até 13 de agosto de 2018. Arquivos com uma extensão XLSX não são incluídos nos resultados da consulta.  `FileExtension` é uma das muitas propriedades que você pode incluir em uma consulta. Para obter mais informações, consulte [usando propriedades e operadores de pesquisa com o eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093).</span><span class="sxs-lookup"><span data-stu-id="6e25c-p113">This returns documents with 5-25 credit card numbers that were scanned from August 11, 2018 through August 13, 2018. Files with an XLSX extension aren't included in the query results.  `FileExtension` is one of many properties that you can include in a query. For more information, see [Using Search Properties and Operators with eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093).  </span></span><br/> |
| `SensitiveType:"Credit Card Number" OR SensitiveType:"U.S. Social Security Number (SSN)"` <br/> |<span data-ttu-id="6e25c-165">Isso retornará documentos que contenham um número de cartão de crédito ou um número de previdência social.</span><span class="sxs-lookup"><span data-stu-id="6e25c-165">This returns documents that contain either a credit card number or a social security number.</span></span>  <br/> |
   
## <a name="examples-of-queries-to-avoid"></a><span data-ttu-id="6e25c-166">Exemplos</span><span class="sxs-lookup"><span data-stu-id="6e25c-166">Examples of queries to avoid</span></span>

<span data-ttu-id="6e25c-p114">Nem todas as consultas são criadas iguais. A tabela a seguir fornece exemplos de consultas que não funcionam com DLP no SharePoint e descreve o porquê.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p114">Not all queries are created equal. The following table gives examples of queries that don't work with DLP in SharePoint and describes why.</span></span>
  
|<span data-ttu-id="6e25c-169">**Consulta incompatível**</span><span class="sxs-lookup"><span data-stu-id="6e25c-169">**Unsupported query**</span></span>|<span data-ttu-id="6e25c-170">**Motivo**</span><span class="sxs-lookup"><span data-stu-id="6e25c-170">**Reason**</span></span>|
|:-----|:-----|
| `SensitiveType:"Credit Card Number|.."` <br/> |<span data-ttu-id="6e25c-171">Você deve adicionar pelo menos um serviço.</span><span class="sxs-lookup"><span data-stu-id="6e25c-171">You must add at least one number.</span></span>  <br/> |
| `SensitiveType:"NotARule"` <br/> |<span data-ttu-id="6e25c-p115">"NotARule" não é um nome de tipo confidencial válido. Somente os nomes no [inventário de tipos de informações confidenciais](https://go.microsoft.com/fwlink/?LinkID=509999) funcionam em consultas de DLP.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p115">"NotARule" isn't a valid sensitive type name. Only names in the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999) work in DLP queries.  </span></span><br/> |
| `SensitiveType:"Credit Card Number|0"` <br/> |<span data-ttu-id="6e25c-174">Zero não é válido como o valor mínimo ou o valor máximo em um intervalo.</span><span class="sxs-lookup"><span data-stu-id="6e25c-174">Zero isn't valid as either the minimum value or the maximum value in a range.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number"` <br/> |<span data-ttu-id="6e25c-p116">Talvez seja difícil ver, mas há um espaço em branco extra entre "crédito" e "cartão" que torna a consulta inválida. Use nomes de tipo confidenciais exatos do [inventário de tipos de informações confidenciais](https://go.microsoft.com/fwlink/?LinkID=509999).</span><span class="sxs-lookup"><span data-stu-id="6e25c-p116">It's might be difficult to see, but there's extra white space between "Credit" and "Card" that makes the query invalid. Use exact sensitive type names from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999).  </span></span><br/> |
| `SensitiveType:"Credit Card Number|1. .3"` <br/> |<span data-ttu-id="6e25c-177">A parte de dois períodos não deve ser separada por um espaço.</span><span class="sxs-lookup"><span data-stu-id="6e25c-177">The two-period portion shouldn't be separated by a space.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number| |1..|80.."` <br/> |<span data-ttu-id="6e25c-178">Há muitos delimitadores de pipe (</span><span class="sxs-lookup"><span data-stu-id="6e25c-178">There are too many pipe delimiters (</span></span>|<span data-ttu-id="6e25c-p117">). Em vez disso, siga este formato:`SensitiveType: "Credit Card Number|1..|80.."`</span><span class="sxs-lookup"><span data-stu-id="6e25c-p117">). Follow this format instead: `SensitiveType: "Credit Card Number|1..|80.."`</span></span> <br/> |
| `SensitiveType:"Credit Card Number|1..|80..101"` <br/> |<span data-ttu-id="6e25c-p118">Como os valores de confiança representam uma porcentagem, eles não podem exceder 100. Escolha um número de 1 a 100 em vez disso.</span><span class="sxs-lookup"><span data-stu-id="6e25c-p118">Because confidence values represent a percentage, they can't exceed 100. Choose a number from 1 through 100 instead.</span></span>  <br/> |
   
## <a name="for-more-information"></a><span data-ttu-id="6e25c-183">Para saber mais</span><span class="sxs-lookup"><span data-stu-id="6e25c-183">For more information</span></span>

[<span data-ttu-id="6e25c-184">O que os tipos de informação confidencial procuram</span><span class="sxs-lookup"><span data-stu-id="6e25c-184">What the sensitive information types look for</span></span>](what-the-sensitive-information-types-look-for.md)
  
[<span data-ttu-id="6e25c-185">Executar uma pesquisa de conteúdo no centro de conformidade &amp; de segurança do Office 365</span><span class="sxs-lookup"><span data-stu-id="6e25c-185">Run a Content Search in the Office 365 Security &amp; Compliance Center</span></span>](run-a-content-search-in-the-security-and-compliance-center.md)
  
[<span data-ttu-id="6e25c-186">Consultas de palavra-chave e condições de pesquisa para Pesquisa de Conteúdo</span><span class="sxs-lookup"><span data-stu-id="6e25c-186">Keyword queries and search conditions for Content Search</span></span>](keyword-queries-and-search-conditions.md)
  

