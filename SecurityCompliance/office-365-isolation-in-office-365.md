---
title: Isolamento de Office 365 e o controle de acesso no Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: 'Resumo: Uma explicação dos isolamento e controle de acesso dentro dos vários aplicativos do Office 365.'
ms.openlocfilehash: c1989bc546df357740ea963a1a241dfa14557931
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/27/2018
ms.locfileid: "22524607"
---
# <a name="isolation-and-access-control-in-office-365"></a><span data-ttu-id="3ccd6-103">Isolamento e controle de acesso no Office 365</span><span class="sxs-lookup"><span data-stu-id="3ccd6-103">Isolation and Access Control in Office 365</span></span>

<span data-ttu-id="3ccd6-p101">Azure Active Directory e o Office 365 usam um modelo de dados altamente complexos que inclui dezenas de serviços, centenas de entidades, milhares de relações e dezenas de milhares de atributos (entidades, relações e atributos, geralmente, são específicas de aplicativos). Em um alto nível, Azure Active Directory e os diretórios de serviço são os contêineres de locatários e destinatários e elas são mantidas em sincronia usando os protocolos de replicação baseada em estado. Além das informações de diretório mantidas no Azure Active Directory, cada um dos serviços também têm seu próprios infraestrutura de serviços de diretório (por exemplo, serviços de diretório do Exchange Online, SharePoint Online Directory Services, etc.).</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p101">Azure Active Directory and Office 365 use a highly complex data model that includes tens of services, hundreds of entities, thousands of relationships, and tens of thousands of attributes (entities, relationships and attributes are often application-specific). At a high level, Azure Active Directory and the service directories are the containers of tenants and recipients, and they are kept in sync using state-based replication protocols. In addition to the directory information held within Azure Active Directory, each of the services also have their own directory services infrastructure (e.g., Exchange Online Directory Services, SharePoint Online Directory Services, etc.).</span></span> 
 
![Sincronização de dados de Inquilino do Office 365](media/office-365-isolation-tenant-data-sync.png)

<span data-ttu-id="3ccd6-p102">Dentro desse modelo, não há única fonte de dados de diretório. Cada item individual de dados é pertencentes a um sistema específico, mas nenhum sistema único contém todos os dados. Serviços do Office 365 cooperam com o Windows Azure Active Directory para concretizar o modelo de dados. Azure Active Directory é o "sistema veracidade" para dados compartilhados, que geralmente são pequenos e estáticos dados frequentemente usados por cada serviço. O modelo de federada usado dentro do Office 365 e Windows Azure Active Directory fornece a exibição compartilhada dos dados.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p102">Within this model, there is no single source of directory data. Every individual piece of data is owned by a specific system, but no single system holds all the data. Office 365 services cooperate with Azure Active Directory to realize the data model. Azure Active Directory is the "system of truth" for shared data, which is typically small and static data used often by every service. The federated model used within Office 365 and Azure Active Directory provides the shared view of the data.</span></span>

<span data-ttu-id="3ccd6-p103">O Office 365 usa armazenamento físico e o armazenamento em nuvem do Windows Azure. O Exchange Online (incluindo o Exchange Online Protection) e Skype para negócios usam seu próprio armazenamento de dados do cliente. SharePoint Online aproveita seu armazenamento do SQL Server e o armazenamento do Azure, exigindo a necessidade de isolamento adicionais de dados do cliente no nível de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p103">Office 365 uses both physical storage and Azure cloud storage. Exchange Online (including Exchange Online Protection) and Skype for Business use their own storage for customer data. SharePoint Online leverages both its SQL Server storage and Azure storage, which necessitates the need for additional isolation of customer data at the storage level.</span></span>

## <a name="exchange-online"></a><span data-ttu-id="3ccd6-116">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="3ccd6-116">Exchange Online</span></span>
<span data-ttu-id="3ccd6-p104">O Exchange Online armazena dados de clientes dentro de caixas de correio hospedadas nos bancos de dados de mecanismo de armazenamento extensível (ESE) chamados bancos de dados de caixa de correio. Isso inclui caixas de correio do usuário, caixas de correio vinculadas, caixas de correio compartilhadas e caixas de correio de pasta pública. Caixas de correio de usuário também podem incluir salva Skype para conteúdo de negócios, como os históricos de conversa. O conteúdo de caixa de correio de usuário inclui emails e anexos de email, as informações de calendário e informações de disponibilidade, contatos, tarefas, anotações, grupos e dados inferência.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p104">Exchange Online stores customer data within mailboxes that are hosted within Extensible Storage Engine (ESE) databases called mailbox databases. This includes user mailboxes, linked mailboxes, shared mailboxes and public folder mailboxes. User mailboxes may also include saved Skype for Business content, such as conversation histories. User mailbox content includes emails and email attachments, calendaring and free/busy information, contacts, tasks, notes, Groups, and inference data.</span></span>

<span data-ttu-id="3ccd6-p105">Cada banco de dados de caixa de correio no Exchange Online contém caixas de correio de vários locatários. Todas as caixas de correio são protegidas pelo código de autorização, incluindo dentro de um locatário. Como com uma implantação local do Exchange, por padrão apenas o usuário atribuído tem acesso a uma caixa de correio. A lista de controle de acesso (ACL) que protege uma caixa de correio contém uma identidade que é autenticada pelo Windows Azure Active Directory no nível do locatário. As caixas de correio para um determinado inquilino estão limitadas a identidades autenticadas em relação ao provedor de autenticação desse inquilino, que incluem somente os usuários de que locatário. Conteúdo pertencentes a TenantA não é possível de nenhuma maneira ser obtido por usuários em TenantB, a menos que explicitamente aprovadas pelos TenantA.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p105">Each mailbox database within Exchange Online contains mailboxes from multiple tenants. All mailboxes are secured by authorization code, including within a tenancy. As with an on-premises deployment of Exchange, by default only the assigned user has access to a mailbox. The access control list (ACL) that secures a mailbox contains an identity that is authenticated by Azure Active Directory at the tenant level. The mailboxes for a given tenant are limited to identities authenticated against that tenant's authentication provider, which include only users from that tenant. Content belonging to TenantA cannot in any way be obtained by users in TenantB, unless explicitly approved by TenantA.</span></span>

## <a name="skype-for-business"></a><span data-ttu-id="3ccd6-127">Skype for Business</span><span class="sxs-lookup"><span data-stu-id="3ccd6-127">Skype for Business</span></span>
<span data-ttu-id="3ccd6-128">Skype para negócios armazena dados em vários locais:</span><span class="sxs-lookup"><span data-stu-id="3ccd6-128">Skype for Business stores data in a variety of places:</span></span>
- <span data-ttu-id="3ccd6-p106">Conta de informações, que inclui os pontos de extremidade de conexão, locatário IDs, planos de discagem, roaming configurações, estado de presença, listas de contatos, etc. e o usuário está armazenado o Skype para servidores do Active Directory de negócios, bem como em vários Skype para o banco de dados corporativos servidores. Listas de contatos são armazenadas na caixa de correio Exchange Online do usuário se o usuário estiver habilitado para ambos os produtos, ou em Skype para servidores de negócios se o usuário não está. Skype para servidores de banco de dados corporativos não são particionados por locatário, mas a multilocação isolamento de dados é imposto por meio de RBAC.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p106">User and account information, which includes connection endpoints, tenant IDs, dial plans, roaming settings, presence state, contact lists, etc., is stored in the Skype for Business Active Directory servers, as well as in various Skype for Business database servers. Contact lists are stored in the user's Exchange Online mailbox if the user is enabled for both products, or on Skype for Business servers if the user is not. Skype for Business database servers are not partitioned per-tenant, but multi-tenancy isolation of data is enforced through RBAC.</span></span>
- <span data-ttu-id="3ccd6-p107">Conteúdo da reunião, como o conteúdo que os usuários carregar durante Skype para reuniões de negócios, é armazenado em compartilhamentos de sistema de arquivos distribuídos. Este conteúdo também pode ser arquivado no Exchange Online, desde que o arquivamento é habilitado. Os compartilhamentos DFS não são particionados por locatário, mas o conteúdo é protegido com ACLs e multilocação é imposta por meio de RBAC.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p107">Meeting content, such as content users upload during Skype for Business meetings, is stored on Distributed File System shares. This content can also be archived in Exchange Online provided archiving is enabled. The DFS shares are not partitioned per-tenant but the content is secured with ACLs and multi-tenancy is enforced through RBAC.</span></span>
- <span data-ttu-id="3ccd6-p108">Registros de detalhe de chamada, que é o histórico de atividade, como histórico de chamadas, sessões de IM, compartilhamento de aplicativos, histórico de mensagens Instantâneas, etc., também podem ser armazenados no Exchange Online, mas a maioria dos registros de detalhe de chamada são temporariamente armazenados nos servidores de registro (CDR) de detalhe de chamada. Conteúdo não é particionado por locatário, mas a multilocação é imposta por meio de RBAC.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p108">Call detail records, which is the activity history, such as call history, IM sessions, application sharing, IM history, etc., can also be stored in Exchange Online, but most call detail records are temporarily stored on call detail record (CDR) servers. Content is not partitioned per tenant, but multi-tenancy is enforced through RBAC.</span></span>

## <a name="sharepoint-online"></a><span data-ttu-id="3ccd6-137">SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="3ccd6-137">SharePoint Online</span></span>
<span data-ttu-id="3ccd6-p109">Há vários mecanismos independentes exclusivos para o SharePoint Online que fornecem o isolamento de dados. SharePoint Online armazena objetos como código abstrata dentro de bancos de dados de aplicativo. Por exemplo, quando um usuário carrega um arquivo para o SharePoint Online, esse arquivo é desmontado e convertido no código do aplicativo e armazenado em várias tabelas entre vários bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p109">There are several independent mechanisms unique to SharePoint Online that provide data isolation. SharePoint Online stores objects as abstracted code within application databases. For example, when a user uploads a file to SharePoint Online, that file is disassembled and translated into application code and stored in multiple tables across multiple databases.</span></span>

<span data-ttu-id="3ccd6-p110">Se um usuário poderá obter acesso direto ao armazenamento contendo os dados, o conteúdo não seria interpretable para uma pessoa ou qualquer sistema diferente do SharePoint Online. Esses mecanismos incluem propriedades e controle de acesso de segurança. Conforme descrito acima, todos os recursos do SharePoint Online são protegidos pela diretiva de RBAC, inclusive dentro de uma locação e do código de autorização. A lista de controle de acesso (ACL) que protege um recurso contém uma identidade que é autenticada no nível do locatário. Assim como acontece com o Exchange Online, no SharePoint Online, os dados para um determinado inquilino estão limitados a identidades autenticadas em relação ao provedor de autenticação desse inquilino, que incluem somente os usuários de que locatário.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p110">If a user could gain direct access to the storage containing the data, the content would not be interpretable to a human or any system other than SharePoint Online. These mechanisms include security access control and properties. As described above, all SharePoint Online resources are secured by the authorization code and RBAC policy, including within a tenancy. The access control list (ACL) that secures a resource contains an identity that is authenticated at the tenant level. As with Exchange Online, in SharePoint Online, data for a given tenant are limited to identities authenticated against that tenant's authentication provider, which include only users from that tenant.</span></span>

<span data-ttu-id="3ccd6-p111">As ACLs, além de uma propriedade de nível de locatário que especifica o provedor de autenticação (que é específica do locatário do Azure Active Directory), é gravada uma vez e não pode ser alterado depois de definido. Depois que a propriedade de locatário do provedor de autenticação tiver sido definida para um inquilino, ele não pode ser alterado usando qualquer APIs expostos para um inquilino.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p111">In addition to the ACLs, a tenant level property that specifies the authentication provider (which is the tenant-specific Azure Active Directory), is written once and cannot be changed once set. Once the authentication provider tenant property has been set for a tenant, it cannot be changed using any APIs exposed to a tenant.</span></span>

<span data-ttu-id="3ccd6-p112">Um único *SubscriptionId* também é usado para cada inquilino. Todos os locais de clientes pertencem a um locatário e que estão atribuídos a um *SubscriptionId* exclusivo para o inquilino. A propriedade *SubscriptionId* em um site é gravada uma vez e não pode ser alterada. Depois que um site é atribuído a um locatário, não podem ser movido para um locatário diferente posteriormente usando a API do repositório de conteúdo. A *SubscriptionId* também é a chave que é usada para criar o escopo de segurança para o provedor de autenticação e está vinculada ao inquilino.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p112">A unique *SubscriptionId* is also used for each tenant. All customer sites are owned by a tenant and are assigned a *SubscriptionId* unique to the tenant. The *SubscriptionId* property on a site is written once and cannot be changed. Once a site is assigned to a tenant, it cannot be moved to a different tenant later using the content store API. The *SubscriptionId* is also the key that is used to create the security scope for the authentication provider and is tied to the tenant.</span></span>

<span data-ttu-id="3ccd6-p113">SharePoint Online usa o armazenamento do SQL Server e Windows Azure para o armazenamento de conteúdo. No nível do SQL, a chave da partição do repositório de conteúdo é *SiteId*. Ao executar uma consulta SQL, SharePoint Online usa *SiteId* foi verificado como parte de uma verificação de nível de locatário *SubscriptionId* .</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p113">SharePoint Online uses SQL Server and Azure storage for the storing of content. At the SQL level, the partition key for the content store is *SiteId*. When running a SQL query, SharePoint Online uses a *SiteId* that has been verified as part of a tenant-level *SubscriptionId* check.</span></span>

<span data-ttu-id="3ccd6-p114">SharePoint Online armazena blobs de arquivo binário (por exemplo, os fluxos de arquivo) no Microsoft Azure. Cada farm do SharePoint Online tem sua própria conta Microsoft Azure e todos os blobs salvos no Azure são criptografados individualmente usando uma chave que é armazenada no repositório de conteúdo do SQL. A chave de criptografia não está exposta diretamente ao usuário final e é protegida em código pela camada de autorização. Finalmente, o SharePoint Online tem o monitoramento em tempo real em vigor para detectar quando uma solicitação HTTP lê ou grava dados para mais de um inquilino. Ele realiza isso mediante a *SubscriptionId* da identidade solicitação contra a *SubscriptionId* do recurso está sendo acessado de acompanhamento. Uma solicitação de acesso a recursos de mais de um inquilino nunca deve acontecer pelo usuário final. Ele pode acontecer para solicitações de serviço em um ambiente de multilocação, no entanto. Por exemplo, o rastreador de pesquisa extrai o conteúdo é alterado para um banco de dados inteiro todo ao mesmo tempo. Isso geralmente envolve consultando sites de mais de um inquilino em uma solicitação de serviço único, que é feito por motivos de eficiência.</span><span class="sxs-lookup"><span data-stu-id="3ccd6-p114">SharePoint Online stores file binary blobs (e.g., the file streams) in Microsoft Azure. Each SharePoint Online farm has its own Microsoft Azure account and all the blobs saved in Azure are encrypted individually using a key that is stored in the SQL content store. The encryption key is not exposed directly to the end user, and is protected in code by the authorization layer. Finally, SharePoint Online has real-time monitoring in place to detect when an HTTP request reads or writes data for more than one tenant. It does this by tracking the *SubscriptionId* of the request identity against the *SubscriptionId* of the resource being accessed. A request accessing resources of more than one tenant should never happen by end-user. It can happen for service requests in a multi-tenant environment, though. For example, the search crawler pulls content changes for an entire database all at once. This usually involves querying sites of more than one tenant in a single service request, which is done for efficiency reasons.</span></span>
