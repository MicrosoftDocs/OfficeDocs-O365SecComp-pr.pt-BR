---
title: Controle de acesso e isolamento do Office 365 no Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: 'Resumo: uma explicação do isolamento e controle de acesso dentro dos vários aplicativos do Office 365.'
ms.openlocfilehash: 734c92a6f3185a25faf9aade1ba235444ed762da
ms.sourcegitcommit: f57b4001ef1327f0ea622e716a4d7d78f1769b49
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/23/2019
ms.locfileid: "30216851"
---
# <a name="isolation-and-access-control-in-office-365"></a><span data-ttu-id="84e2f-103">Isolamento e controle de acesso no Office 365</span><span class="sxs-lookup"><span data-stu-id="84e2f-103">Isolation and Access Control in Office 365</span></span>

<span data-ttu-id="84e2f-p101">O Azure Active Directory e o Office 365 usam um modelo de dados altamente complexo que inclui dezenas de serviços, centenas de entidades, milhares de relações e dezenas de milhares de atributos (entidades, relações e atributos costumam ser específicos de aplicativos). Em um nível alto, o Azure Active Directory e os diretórios de serviço são contêineres de locatários e destinatários, e são mantidos em sincronização usando protocolos de replicação baseados em estado. Além das informações de diretório mantidas no Azure Active Directory, cada um dos serviços também tem sua própria infraestrutura de serviços de diretório (por exemplo, serviços de diretório do Exchange Online, serviços de diretório do SharePoint Online, etc.).</span><span class="sxs-lookup"><span data-stu-id="84e2f-p101">Azure Active Directory and Office 365 use a highly complex data model that includes tens of services, hundreds of entities, thousands of relationships, and tens of thousands of attributes (entities, relationships and attributes are often application-specific). At a high level, Azure Active Directory and the service directories are the containers of tenants and recipients, and they are kept in sync using state-based replication protocols. In addition to the directory information held within Azure Active Directory, each of the services also have their own directory services infrastructure (e.g., Exchange Online Directory Services, SharePoint Online Directory Services, etc.).</span></span> 
 
![Sincronização de dados do locatário do Office 365](media/office-365-isolation-tenant-data-sync.png)

<span data-ttu-id="84e2f-p102">Dentro desse modelo, não há uma única fonte de dados de diretório. Cada parte de dados individual pertence a um sistema específico, mas nenhum sistema contém todos os dados. Os serviços do Office 365 cooperar com o Azure Active Directory para obter o modelo de dados. O Azure Active Directory é o "sistema de verdade" para dados compartilhados, que normalmente são pequenos e dados estáticos usados frequentemente por cada serviço. O modelo federado usado no Office 365 e no Azure Active Directory fornece a exibição compartilhada dos dados.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p102">Within this model, there is no single source of directory data. Every individual piece of data is owned by a specific system, but no single system holds all the data. Office 365 services cooperate with Azure Active Directory to realize the data model. Azure Active Directory is the "system of truth" for shared data, which is typically small and static data used often by every service. The federated model used within Office 365 and Azure Active Directory provides the shared view of the data.</span></span>

<span data-ttu-id="84e2f-p103">O Office 365 usa o armazenamento físico e o armazenamento em nuvem do Azure. O Exchange Online (incluindo o Exchange Online Protection) e o Skype for Business usam seu próprio armazenamento para dados do cliente. O SharePoint Online utiliza o armazenamento do SQL Server e o armazenamento do Azure, o que exige a necessidade de isolamento adicional dos dados do cliente no nível de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p103">Office 365 uses both physical storage and Azure cloud storage. Exchange Online (including Exchange Online Protection) and Skype for Business use their own storage for customer data. SharePoint Online leverages both its SQL Server storage and Azure storage, which necessitates the need for additional isolation of customer data at the storage level.</span></span>

## <a name="exchange-online"></a><span data-ttu-id="84e2f-116">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="84e2f-116">Exchange Online</span></span>
<span data-ttu-id="84e2f-p104">O Exchange Online armazena dados do cliente em caixas de correio hospedadas em bancos de dados ESE (Extensible Storage Engine) chamados de bancos de dados de caixa de correio. Isso inclui caixas de correio de usuário, caixas de correio vinculadas, caixas de correio compartilhadas e caixas de correio de pasta pública. As caixas de correio do usuário também podem incluir conteúdo salvo do Skype for Business, como históricos de conversas. O conteúdo da caixa de correio do usuário inclui emails e anexos de email, informações de calendário e disponibilidade, contatos, tarefas, observações, grupos e dados de inferência.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p104">Exchange Online stores customer data within mailboxes that are hosted within Extensible Storage Engine (ESE) databases called mailbox databases. This includes user mailboxes, linked mailboxes, shared mailboxes and public folder mailboxes. User mailboxes may also include saved Skype for Business content, such as conversation histories. User mailbox content includes emails and email attachments, calendaring and free/busy information, contacts, tasks, notes, Groups, and inference data.</span></span>

<span data-ttu-id="84e2f-p105">Cada banco de dados de caixa de correio no Exchange Online contém caixas de correio de vários locatários. Todas as caixas de correio são protegidas por código de autorização, incluindo dentro de um locatário. Como em uma implantação local do Exchange, por padrão, apenas o usuário atribuído tem acesso a uma caixa de correio. A lista de controle de acesso (ACL) que protege uma caixa de correio contém uma identidade que é autenticada pelo Azure Active Directory no nível do locatário. As caixas de correio de um determinado locatário são limitadas às identidades autenticadas no provedor de autenticação do locatário, que incluem apenas usuários desse locatário. O conteúdo que pertence ao Locatárioa não pode ser obtido por usuários no TenantB, a menos que explicitamente aprovado pelo Locatárioa.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p105">Each mailbox database within Exchange Online contains mailboxes from multiple tenants. All mailboxes are secured by authorization code, including within a tenancy. As with an on-premises deployment of Exchange, by default only the assigned user has access to a mailbox. The access control list (ACL) that secures a mailbox contains an identity that is authenticated by Azure Active Directory at the tenant level. The mailboxes for a given tenant are limited to identities authenticated against that tenant's authentication provider, which include only users from that tenant. Content belonging to TenantA cannot in any way be obtained by users in TenantB, unless explicitly approved by TenantA.</span></span>

## <a name="skype-for-business"></a><span data-ttu-id="84e2f-127">Skype for Business</span><span class="sxs-lookup"><span data-stu-id="84e2f-127">Skype for Business</span></span>
<span data-ttu-id="84e2f-128">O Skype for Business armazena dados em vários lugares:</span><span class="sxs-lookup"><span data-stu-id="84e2f-128">Skype for Business stores data in a variety of places:</span></span>
- <span data-ttu-id="84e2f-p106">As informações de usuário e conta, que incluem pontos de extremidade de conexão, IDs de locatário, planos de discagem, configurações de roaming, estado de presença, listas de contatos, etc., são armazenadas nos servidores do Active Directory do Skype for Business, bem como em vários bancos de dados do Skype for Business servidores. As listas de contatos são armazenadas na caixa de correio do Exchange Online do usuário se o usuário estiver habilitado para ambos os produtos ou nos servidores do Skype for Business se o usuário não for. Os servidores de banco de dados do Skype for Business não são particionados por locatário, mas o isolamento de vários associados é imposto por meio de RBAC.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p106">User and account information, which includes connection endpoints, tenant IDs, dial plans, roaming settings, presence state, contact lists, etc., is stored in the Skype for Business Active Directory servers, as well as in various Skype for Business database servers. Contact lists are stored in the user's Exchange Online mailbox if the user is enabled for both products, or on Skype for Business servers if the user is not. Skype for Business database servers are not partitioned per-tenant, but multi-tenancy isolation of data is enforced through RBAC.</span></span>
- <span data-ttu-id="84e2f-p107">O conteúdo da reunião, como o carregamento de usuários de conteúdo durante as reuniões do Skype for Business, é armazenado em compartilhamentos do sistema de arquivos distribuídos. Esse conteúdo também pode ser arquivado no Exchange Online fornecido o arquivamento está habilitado. Os compartilhamentos DFS não são particionados por locatário, mas o conteúdo é protegido com ACLs e a multilocação é imposta por meio de RBAC.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p107">Meeting content, such as content users upload during Skype for Business meetings, is stored on Distributed File System shares. This content can also be archived in Exchange Online provided archiving is enabled. The DFS shares are not partitioned per-tenant but the content is secured with ACLs and multi-tenancy is enforced through RBAC.</span></span>
- <span data-ttu-id="84e2f-p108">Os registros de detalhes da chamada, que é o histórico de atividades, como histórico de chamadas, sessões de IM, compartilhamento de aplicativos, histórico de mensagens INSTANTÂNEAs, etc., também podem ser armazenados no Exchange Online, mas a maioria dos registros de detalhes das chamadas são temporariamente armazenados em servidores de CDR (registro de detalhes de chamadas). O conteúdo não é particionado por locatário, mas a multilocação é imposta por meio de RBAC.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p108">Call detail records, which is the activity history, such as call history, IM sessions, application sharing, IM history, etc., can also be stored in Exchange Online, but most call detail records are temporarily stored on call detail record (CDR) servers. Content is not partitioned per tenant, but multi-tenancy is enforced through RBAC.</span></span>

## <a name="sharepoint-online"></a><span data-ttu-id="84e2f-137">SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="84e2f-137">SharePoint Online</span></span>
<span data-ttu-id="84e2f-p109">Há vários mecanismos independentes exclusivos do SharePoint Online que oferecem isolamento de dados. O SharePoint Online armazena objetos como código abstrato em bancos de dados de aplicativos. Por exemplo, quando um usuário carrega um arquivo para o SharePoint Online, esse arquivo é desmontado e convertido em código do aplicativo e armazenado em várias tabelas em vários bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p109">There are several independent mechanisms unique to SharePoint Online that provide data isolation. SharePoint Online stores objects as abstracted code within application databases. For example, when a user uploads a file to SharePoint Online, that file is disassembled and translated into application code and stored in multiple tables across multiple databases.</span></span>

<span data-ttu-id="84e2f-p110">Se um usuário puder obter acesso direto ao armazenamento contendo os dados, o conteúdo não poderá ser interpretado para um humano ou qualquer sistema que não seja o SharePoint Online. Esses mecanismos incluem controle de acesso de segurança e propriedades. Conforme descrito acima, todos os recursos do SharePoint Online são protegidos pelo código de autorização e pela política RBAC, incluindo dentro de um locatário. A lista de controle de acesso (ACL) que protege um recurso contém uma identidade que é autenticada no nível do locatário. Como no Exchange Online, no SharePoint Online, os dados de um determinado locatário são limitados às identidades autenticadas no provedor de autenticação do locatário, que incluem apenas os usuários desse locatário.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p110">If a user could gain direct access to the storage containing the data, the content would not be interpretable to a human or any system other than SharePoint Online. These mechanisms include security access control and properties. As described above, all SharePoint Online resources are secured by the authorization code and RBAC policy, including within a tenancy. The access control list (ACL) that secures a resource contains an identity that is authenticated at the tenant level. As with Exchange Online, in SharePoint Online, data for a given tenant are limited to identities authenticated against that tenant's authentication provider, which include only users from that tenant.</span></span>

<span data-ttu-id="84e2f-p111">Além das ACLs, uma propriedade de nível de locatário que especifica o provedor de autenticação (que é o Azure Active Directory específico do locatário), é gravada uma vez e não pode ser alterada depois de definida. Depois que a propriedade locatário do provedor de autenticação tiver sido definida para um locatário, ela não poderá ser alterada usando as APIs expostas a um locatário.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p111">In addition to the ACLs, a tenant level property that specifies the authentication provider (which is the tenant-specific Azure Active Directory), is written once and cannot be changed once set. Once the authentication provider tenant property has been set for a tenant, it cannot be changed using any APIs exposed to a tenant.</span></span>

<span data-ttu-id="84e2f-p112">Um *SubscriptionId* exclusivo também é usado para cada locatário. Todos os sites de clientes pertencem a um locatário e recebem uma *assinatura* exclusiva do locatário. A \*\* Propriedade SubscriptionId em um site é gravada uma vez e não pode ser alterada. Depois que um site é atribuído a um locatário, ele não pode ser movido para um locatário diferente mais tarde usando a API do repositório de conteúdo. *SubscriptionId* também é a chave usada para criar o escopo de segurança para o provedor de autenticação e está vinculada ao locatário.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p112">A unique *SubscriptionId* is also used for each tenant. All customer sites are owned by a tenant and are assigned a *SubscriptionId* unique to the tenant. The *SubscriptionId* property on a site is written once and cannot be changed. Once a site is assigned to a tenant, it cannot be moved to a different tenant later using the content store API. The *SubscriptionId* is also the key that is used to create the security scope for the authentication provider and is tied to the tenant.</span></span>

<span data-ttu-id="84e2f-p113">O SharePoint Online usa o SQL Server e o armazenamento do Azure para o armazenamento de conteúdo. No nível SQL, a chave de partição para o repositório de conteúdo \*\* é SiteId. Ao executar uma consulta SQL, o SharePoint Online usa \*\* um SiteId que foi verificado como parte de uma verificação de *SubscriptionId* no nível do locatário.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p113">SharePoint Online uses SQL Server and Azure storage for the storing of content. At the SQL level, the partition key for the content store is *SiteId*. When running a SQL query, SharePoint Online uses a *SiteId* that has been verified as part of a tenant-level *SubscriptionId* check.</span></span>

<span data-ttu-id="84e2f-p114">O SharePoint Online armazena blobs binários de arquivos (por exemplo, os fluxos de arquivos) no Microsoft Azure. Cada farm do SharePoint Online tem sua própria conta do Microsoft Azure e todos os BLOBs salvos no Azure são criptografados individualmente usando uma chave que é armazenada no repositório de conteúdo do SQL. A chave de criptografia não é exposta diretamente ao usuário final e é protegida no código pela camada de autorização. Por fim, o SharePoint Online tem monitoramento em tempo real em vigor para detectar quando uma solicitação HTTP lê ou grava dados para mais de um locatário. Ele faz isso acompanhando *SubscriptionId* da identidade da solicitação em relação à *SubscriptionId* do recurso que está sendo acessado. Uma solicitação de acesso A recursos de mais de um locatário nunca deve acontecer pelo usuário final. Isso pode acontecer em solicitações de serviço em um ambiente de vários locatários, no entanto. Por exemplo, o rastreador de pesquisa recebe alterações de conteúdo para todo o banco de dados de uma só vez. Isso geralmente envolve a consulta de sites de mais de um locatário em uma única solicitação de serviço, que é feita por motivos de eficiência.</span><span class="sxs-lookup"><span data-stu-id="84e2f-p114">SharePoint Online stores file binary blobs (e.g., the file streams) in Microsoft Azure. Each SharePoint Online farm has its own Microsoft Azure account and all the blobs saved in Azure are encrypted individually using a key that is stored in the SQL content store. The encryption key is not exposed directly to the end user, and is protected in code by the authorization layer. Finally, SharePoint Online has real-time monitoring in place to detect when an HTTP request reads or writes data for more than one tenant. It does this by tracking the *SubscriptionId* of the request identity against the *SubscriptionId* of the resource being accessed. A request accessing resources of more than one tenant should never happen by end-user. It can happen for service requests in a multi-tenant environment, though. For example, the search crawler pulls content changes for an entire database all at once. This usually involves querying sites of more than one tenant in a single service request, which is done for efficiency reasons.</span></span>
