---
title: Resiliência de dados do Exchange Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: Uma explicação dos vários aspectos de resiliência de dados dentro do Exchange Online e o Office 365.
ms.openlocfilehash: 8d0448a95f010b766faf852a374513a1c2da61fa
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/27/2018
ms.locfileid: "22523949"
---
# <a name="exchange-online-data-resiliency-in-office-365"></a><span data-ttu-id="3f8e7-103">Resiliência de dados on-line do Exchange no Office 365</span><span class="sxs-lookup"><span data-stu-id="3f8e7-103">Exchange Online Data Resiliency in Office 365</span></span>

## <a name="introduction"></a><span data-ttu-id="3f8e7-104">Introdução</span><span class="sxs-lookup"><span data-stu-id="3f8e7-104">Introduction</span></span>
<span data-ttu-id="3f8e7-p101">Existem dois tipos de corrupção que podem afetar a um banco de dados do Exchange: corrupção física, que é geralmente causada por problemas de hardware (em particular, hardware de armazenamento), e corrupção lógica, que ocorre devido aos outros fatores. Geralmente, há dois tipos de corrupção lógica que podem ocorrer em um banco de dados do Exchange:</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p101">There are two types of corruption that can affect an Exchange database: physical corruption, which is typically caused by hardware (in particular, storage hardware) problems, and logical corruption, which occurs due to other factors. Generally, there are two types of logical corruption that can occur within an Exchange database:</span></span> 
- <span data-ttu-id="3f8e7-p102">**Corrupção lógica do banco de dados** - as correspondências de soma de verificação de página de banco de dados, mas os dados na página logicamente está errado. Isso pode ocorrer quando o mecanismo de banco de dados (o Extensible Storage Engine (ESE)) tenta escrever uma página de banco de dados e o mesmo que o sistema operacional retorna uma mensagem de êxito, os dados são seja nunca gravados no disco ou ele está escrito para o lugar errado. Isso é conhecido como um *perdido flush*. ESE inclui vários recursos e proteções que foram projetadas para evitar corrupção física de um banco de dados e outros cenários de perda de dados. Para impedir que liberações perdidas perda de dados, o ESE inclui um mecanismo de detecção de liberação perdidas no banco de dados, juntamente com um recurso (restauração de página única) para corrigi-la.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p102">**Database logical corruption** - The database page checksum matches, but the data on the page is wrong logically. This can occur when the database engine (the Extensible Storage Engine (ESE)) attempts to write a database page and even though the operating system returns a success message, the data is either never written to the disk or it's written to the wrong place. This is referred to as a *lost flush*. ESE includes numerous features and safeguards that are designed to prevent physical corruption of a database and other data loss scenarios. To prevent lost flushes from losing data, ESE includes a lost flush detection mechanism in the database along with a feature (single page restore) to correct it.</span></span> 
- <span data-ttu-id="3f8e7-p103">**Corrupção lógica do repositório** - dados é adicionado, excluído ou manipulado de forma que o usuário não esperar. Nesses casos são geralmente causados por aplicativos de terceiros. Geralmente, é só corrupção no sentido de que o usuário visualiza como corrupção. O armazenamento do Exchange considera a transação que produzidos corrupção lógica para ser uma série de operações de MAPI válidas. Os recursos de [Retenção In-loco](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) no Exchange Online oferece proteção contra corrupção lógica do repositório (porque ele impede que o conteúdo sendo excluído permanentemente por um usuário ou um aplicativo).</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p103">**Store logical corruption** - Data is added, deleted, or manipulated in a way that the user doesn't expect. These cases are generally caused by third-party applications. It's generally only corruption in the sense that the user views it as corruption. The Exchange store considers the transaction that produced the logical corruption to be a series of valid MAPI operations. The [In-Place Hold](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) features in Exchange Online provides protection from store logical corruption (because it prevents content from being permanently deleted by a user or an application).</span></span> 

<span data-ttu-id="3f8e7-p104">O Exchange Online realiza várias verificações de consistência em arquivos de log replicados durante inspeção de log e a reprodução de log. Essas verificações de consistência objetivo de impedir danos físicos sejam replicados pelo sistema. Por exemplo, durante a inspeção de log, há uma verificação de integridade física que verifica o arquivo de log e valida se a soma de verificação gravada no arquivo de log corresponde a soma de verificação gerada na memória. Além disso, o cabeçalho do arquivo de log é examinado para certificar-se de que a assinatura do arquivo de log registrada no cabeçalho log corresponde do arquivo de log. Durante a reprodução de log, o arquivo de log passa por ainda mais exames detalhados. Por exemplo, o cabeçalho de banco de dados também contém a assinatura de log que é comparada com a assinatura do arquivo de log para garantir que elas correspondam.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p104">Exchange Online performs several consistency checks on replicated log files during both log inspection and log replay. These consistency checks prevent physical corruption from being replicated by the system. For example, during log inspection, there is a physical integrity check which verifies the log file and validates that the checksum recorded in the log file matches the checksum generated in memory. In addition, the log file header is examined to make sure the log file signature recorded in the log header matches that of the log file. During log replay, the log file undergoes further scrutiny. For example, the database header also contains the log signature which is compared with the log file's signature to ensure they match.</span></span> 

<span data-ttu-id="3f8e7-p105">Proteção contra corrupção de dados de caixa de correio no Exchange Online é obtida usando a proteção de dados nativa do Exchange, uma estratégia de resiliência que aproveita a replicação de nível de aplicativo em vários servidores e diversos datacenters, juntamente com outros recursos que ajudam a proteger os dados sejam perdidas devido a corrupção ou outros motivos. Esses recursos incluem recursos nativos que são gerenciados pela Microsoft ou Exchange Online próprio aplicativo, tais como:</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p105">Protection against corruption of mailbox data in Exchange Online is achieved by using Exchange Native Data Protection, a resiliency strategy that leverages application-level replication across multiple servers and multiple datacenters along with other features that help protect data from being lost due to corruption or other reasons. These features include native features that are managed by Microsoft or the Exchange Online application itself, such as:</span></span>

- [<span data-ttu-id="3f8e7-125">Grupos de disponibilidade de dados</span><span class="sxs-lookup"><span data-stu-id="3f8e7-125">Data Availability Groups</span></span>](https://docs.microsoft.com/exchange/back-up-email)
- <span data-ttu-id="3f8e7-126">Correção de Bit único</span><span class="sxs-lookup"><span data-stu-id="3f8e7-126">Single Bit Correction</span></span> 
- <span data-ttu-id="3f8e7-127">Banco de dados online verificação</span><span class="sxs-lookup"><span data-stu-id="3f8e7-127">Online Database Scanning</span></span> 
- <span data-ttu-id="3f8e7-128">Detecção de liberação perdida</span><span class="sxs-lookup"><span data-stu-id="3f8e7-128">Lost Flush Detection</span></span> 
- <span data-ttu-id="3f8e7-129">Restauração de página única</span><span class="sxs-lookup"><span data-stu-id="3f8e7-129">Single Page Restore</span></span> 
- <span data-ttu-id="3f8e7-130">Serviço de replicação de caixa de correio</span><span class="sxs-lookup"><span data-stu-id="3f8e7-130">Mailbox Replication Service</span></span> 
- <span data-ttu-id="3f8e7-131">Verificações de arquivo de log</span><span class="sxs-lookup"><span data-stu-id="3f8e7-131">Log File Checks</span></span> 
- <span data-ttu-id="3f8e7-132">Implantação no sistema de arquivos resiliente</span><span class="sxs-lookup"><span data-stu-id="3f8e7-132">Deployment on Resilient File System</span></span> 

<span data-ttu-id="3f8e7-p106">Para obter mais informações sobre os recursos nativos listados acima, clique em hiperlinks acima e veja abaixo para obter informações adicionais e para obter detalhes sobre os itens sem hiperlinks. Além desses recursos nativos, o Exchange Online também inclui recursos de resiliência de dados que os clientes podem gerenciar, tais como:</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p106">For more information on the native features listed above, click on the above hyperlinks, and see below for additional information and for details on items without hyperlinks. In addition to these native features, Exchange Online also includes data resiliency features that customers can manage, such as:</span></span> 
- [<span data-ttu-id="3f8e7-135">Recuperação de Item único (habilitado por padrão)</span><span class="sxs-lookup"><span data-stu-id="3f8e7-135">Single Item Recovery (enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages) 
- [<span data-ttu-id="3f8e7-136">Bloqueio In-loco e Retenção de Litígio</span><span class="sxs-lookup"><span data-stu-id="3f8e7-136">In-Place Hold and Litigation Hold</span></span>](https://docs.microsoft.com/exchange/security-and-compliance/in-place-and-litigation-holds) 
- [<span data-ttu-id="3f8e7-137">Retenção de Item de excluído e caixas de correio de Soft-Deleted (ambos ativados por padrão)</span><span class="sxs-lookup"><span data-stu-id="3f8e7-137">Deleted Item Retention and Soft-Deleted Mailboxes (both enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/delete-or-restore-mailboxes) 

## <a name="database-availability-groups"></a><span data-ttu-id="3f8e7-138">Grupos de Disponibilidade de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="3f8e7-138">Database Availability Groups</span></span> 
<span data-ttu-id="3f8e7-p107">Cada banco de dados de caixa de correio no Office 365 é hospedado em um [grupo de disponibilidade do banco de dados (DAG)](https://docs.microsoft.com/exchange/back-up-email) e replicado em centros de dados geograficamente separados com a mesma região. A configuração mais comum é quatro cópias de banco de dados em quatro datacenters; No entanto, algumas regiões tem menos de centros de dados (bancos de dados são replicados para três centros de dados na Índia e dois datacenters na Austrália e Japão). Mas em todos os casos, cada banco de dados de caixa de correio tem quatro cópias distribuídas em vários datacenters, garantindo assim que os dados de caixa de correio estão protegidos contra falhas de datacenter até mesmo, hardware e software.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p107">Every mailbox database in Office 365 is hosted in a [database availability group (DAG)](https://docs.microsoft.com/exchange/back-up-email) and replicated to geographically-separate datacenters within the same region. The most common configuration is four database copies in four datacenters; however, some regions have fewer datacenters (databases are replicated to three datacenters in India, and two datacenters in Australia and Japan). But in all cases, every mailbox database has four copies that are distributed across multiple datacenters, thereby ensuring that mailbox data is protected from software, hardware, and even datacenter failures.</span></span> 

<span data-ttu-id="3f8e7-p108">Sem essas quatro cópias, três deles são configurados como altamente disponível. A cópia do quarta é configurada como um [atraso de cópia de banco de dados](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies). A cópia do banco de dados com retardamento não se destina a recuperação de caixa de correio individual ou recuperação de item de caixa de correio. Seu objetivo é fornecer um mecanismo de recuperação para o evento raro de todo o sistema, uma catástrofe corrupção lógica.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p108">Out of these four copies, three of them are configured as highly available. The fourth copy is configured as a [lagged database copy](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies). The lagged database copy is not intended for individual mailbox recovery or mailbox item recovery. Its purpose is to provide a recovery mechanism for the rare event of system-wide, catastrophic logical corruption.</span></span> 

<span data-ttu-id="3f8e7-p109">Cópias de banco de dados com atraso no Exchange Online são configuradas com um tempo de retardo de repetição de arquivo de log de sete dias. Além disso, o Gerenciador de retardo de repetição do Exchange está habilitado para fornecer log dinâmico arquivo descarte de cópias com retardamento permitir que cópias de banco de dados com retardamento reparo automático e gerenciar o crescimento do arquivo de log. Embora o atraso cópias são usadas no Exchange Online do banco de dados, é importante entender que não são um backup garantido no momento. Cópias de banco de dados com atraso no Exchange Online, que tem um limite de disponibilidade, normalmente aproximadamente 90%, devido aos períodos em que o disco que contém uma cópia com atraso é perdido devido à falha de disco, a cópia com atraso se tornando uma altamente disponível copiar (devido à automática de descarte), também como os períodos onde a cópia do banco de dados com retardamento está criando novamente o log de repetição fila.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p109">Lagged database copies in Exchange Online are configured with a seven-day log file replay lag time. In addition, the Exchange Replay Lag Manager is enabled to provide dynamic log file play down for lagged copies to allow lagged database copies to self-repair and manage log file growth. Although lagged database copies are used in Exchange Online, it is important to understand that they are not a guaranteed point-in-time backup. Lagged database copies in Exchange Online have an availability threshold, typically around 90%, due to periods where the disk containing a lagged copy is lost due to disk failure, the lagged copy becoming a highly-available copy (due to automatic play down), as well as the periods where the lagged database copy is re-building the log replay queue.</span></span> 

## <a name="transport-resilience"></a><span data-ttu-id="3f8e7-150">Resiliência de transporte</span><span class="sxs-lookup"><span data-stu-id="3f8e7-150">Transport Resilience</span></span> 
<span data-ttu-id="3f8e7-p110">O Exchange Online inclui dois recursos de resiliência de transporte primário: Safety Net e redundância de sombra. Redundância de sombra mantém uma cópia redundante de uma mensagem enquanto ela está em trânsito. Safety Net mantém uma cópia redundante de uma mensagem depois que a mensagem é entregue com êxito.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p110">Exchange Online includes two primary transport resilience features: Shadow Redundancy and Safety Net. Shadow Redundancy keeps a redundant copy of a message while it is in transit. Safety Net keeps a redundant copy of a message after the message is successfully delivered.</span></span> 

<span data-ttu-id="3f8e7-p111">Com a redundância de sombra, cada servidor de transporte Exchange Online faz uma cópia de cada mensagem recebida antes que ele reconhece com êxito recebendo a mensagem para o servidor de envio. Isso faz com que todas as mensagens no pipeline de transporte redundantes em trânsito. Se o Exchange Online determina que a mensagem original foi perdida em trânsito, uma cópia redundante da mensagem é entregue novamente.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p111">With Shadow Redundancy, each Exchange Online transport server makes a copy of each messages it receives before it acknowledges successfully receiving the message to the sending server. This makes all messages in the transport pipeline redundant while in transit. If Exchange Online determines the original message was lost in transit, a redundant copy of the message is redelivered.</span></span> 

<span data-ttu-id="3f8e7-p112">Rede de segurança é uma fila de transporte que está associada com o serviço de transporte em um servidor de caixa de correio. Essa fila armazena cópias das mensagens que foram processadas com êxito pelo servidor. Quando uma falha de banco de dados ou o servidor de caixa de correio requer Ativando uma cópia desatualizada do banco de dados de caixa de correio, as mensagens na fila Safety Net automaticamente são reenviadas para a nova cópia ativa do banco de dados de caixa de correio. Safety Net também são redundante, eliminando o transporte como um único ponto de falha. Ele usa o conceito de uma rede de segurança principal e uma sombra Safety Net no qual se o Safety Net principal não está disponível por mais de 12 horas, reenviar solicitações se tornam as solicitações de reenvio de sombra e as mensagens são entregues novamente da sombra Safety Net.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p112">Safety Net is a transport queue that is associated with the Transport service on a Mailbox server. This queue stores copies of messages that were successfully processed by the server. When a mailbox database or server failure requires activating an out-of-date copy of the mailbox database, messages in the Safety Net queue are automatically resubmitted to the new active copy of the mailbox database. Safety Net is also redundant, thereby eliminating transport as a single point of failure. It uses the concept of a Primary Safety Net and a Shadow Safety Net wherein if the Primary Safety Net is unavailable for more than 12 hours, resubmit requests become shadow resubmit requests, and messages are re-delivered from the Shadow Safety Net.</span></span>

<span data-ttu-id="3f8e7-p113">Reenvios mensagens da Safety Net são iniciados automaticamente pelo componente Gerenciador ativo do serviço de replicação do Microsoft Exchange que gerencia a caixa de correio e DAGs cópias de banco de dados. Nenhuma ação manual é necessárias para reenviar mensagens da Safety Net.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p113">Message resubmissions from Safety Net are automatically initiated by the Active Manager component of the Microsoft Exchange Replication service that manages DAGs and mailbox database copies. No manual actions are required to resubmit messages from Safety Net.</span></span> 

## <a name="single-bit-correction"></a><span data-ttu-id="3f8e7-164">Correção de Bit único</span><span class="sxs-lookup"><span data-stu-id="3f8e7-164">Single Bit Correction</span></span> 
<span data-ttu-id="3f8e7-p114">ESE inclui um mecanismo para detectar e resolver erros de CRC de bit único (também conhecido como bit único inverte) que são o resultado de erros de hardware (e, como tal, representam corrupção física). Quando esses erros ocorrem, ESE corrige-las automaticamente e registra um evento no log de eventos.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p114">ESE includes a mechanism to detect and resolve single-bit CRC errors (aka single-bit flips) that are the result of hardware errors (and as such they represent physical corruption). When these errors occur, ESE automatically corrects them and logs an event in the event log.</span></span> 

## <a name="online-database-scanning"></a><span data-ttu-id="3f8e7-167">Banco de dados online verificação</span><span class="sxs-lookup"><span data-stu-id="3f8e7-167">Online Database Scanning</span></span> 
<span data-ttu-id="3f8e7-p115">Banco de dados online verificação (também conhecida como a *soma de banco de dados*) é o processo onde um ESE usa um verificador de consistência do banco de dados para cada página de leitura e verificar para corrupção de página. A principal finalidade é detectar corrupção física e liberações perdidas que podem não ser obtendo detectadas pelas operações transacionais. Verificação de banco de dados também executa a falha de pós-armazenamento de operações. Espaço pode ser vazado devido a falhas e verificação de banco de dados online localiza e recupera espaço perdido. O sistema foi projetado com a expectativa que cada banco de dados sejam verificado totalmente uma vez a cada sete dias.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p115">Online database scanning (also known as *database checksumming*) is the process where an ESE uses a database consistency checker to read each page and check for page corruption. The primary purpose is to detect physical corruption and lost flushes that may not be getting detected by transactional operations. Database scanning also performs post-store crash operations. Space can be leaked due to crashes, and online database scanning finds and recovers lost space. The system is designed with the expectation that every database is fully scanned once every seven days.</span></span> 

## <a name="lost-flush-detection"></a><span data-ttu-id="3f8e7-173">Detecção de liberação perdida</span><span class="sxs-lookup"><span data-stu-id="3f8e7-173">Lost Flush Detection</span></span> 
<span data-ttu-id="3f8e7-p116">Um flush perdido ocorre quando uma operação de gravação do banco de dados que o sistema/operacional subsistema do disco retornado como concluída, na verdade, não pôde ser gravada para disco ou foi escrito no local errado. Perdido liberação de incidentes pode resultado na corrupção lógica do banco de dados, portanto para impedir que liberações perdidas resulta em perda de dados, ESE inclui um mecanismo de detecção de liberação perdidas. Como as páginas de banco de dados são gravadas cópias passivas, uma verificação é executada por liberações perdidas na cópia ativa. Se for detectado um flush perdida, ESE pode reparar o processo usando uma página no processo de aplicação de patch.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p116">A lost flush occurs when a database write operation that the disk subsystem/operating system returned as completed did not actually get written to disk, or was written in the wrong location. Lost flush incidents can result in database logical corruption, so to prevent lost flushes from resulting in lost data, ESE includes a lost flush detection mechanism. As database pages are written to passive copies, a check is performed for lost flushes on the active copy. If a lost flush is detected, ESE can repair the process using a page patching process.</span></span> 

## <a name="single-page-restore"></a><span data-ttu-id="3f8e7-178">Restauração de página única</span><span class="sxs-lookup"><span data-stu-id="3f8e7-178">Single Page Restore</span></span> 
<span data-ttu-id="3f8e7-p117">Restauração de página única, também conhecido como *correção de página*, é um processo automático onde as páginas do banco de dados corrompido são substituídas por cópias íntegras de uma réplica íntegra. O processo de reparo para uma página corrompido depende se a cópia do banco de dados está ativo ou passivo. Quando uma cópia do banco de dados ativo encontra uma página corrompida, ele pode copiar uma página de uma das suas réplicas, desde que a página copia é completamente atualizada. Isso é feito colocando-se uma solicitação para a página em um fluxo de log, que é a base da replicação de banco de dados de caixa de correio. Assim que uma réplica encontra a solicitação de página responderá enviando uma cópia da página para a cópia do banco de dados solicitante. Restauração de página única também oferece um mecanismo de comunicação assíncrona para ativa solicitar uma página de réplicas, mesmo se as réplicas estiverem offline.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p117">Single page restore, aka *page patching*, is an automatic process where corrupt database pages are replaced by healthy copies from a healthy replica. The repair process for a corrupt page depends on whether the database copy is active or passive. When an active database copy encounters a corrupted page, it can copy a page from one of its replicas, provided the page it copies is completely up-to-date. This is accomplished by putting a request for the page into the log stream, which is the basis of mailbox database replication. As soon as a replica encounters the page request it responds by sending a copy of the page to the requesting database copy. Single page restore also provides an asynchronous communication mechanism for the active to request a page from replicas, even if the replicas are currently offline.</span></span> 

<span data-ttu-id="3f8e7-p118">No caso de danos em uma cópia passiva do banco de dados, incluindo uma cópia do banco de dados com retardamento, pois essas cópias são sempre por trás de sua cópia ativa, é sempre seguro copiar qualquer página da cópia ativa para uma cópia passiva. Uma cópia passiva do banco de dados é por natureza altamente disponível e, portanto durante a processo de aplicação de patches de página, o log reproduzindo é suspenso, mas a cópia de log continuará. A cópia passiva do banco de dados recupera uma cópia da página corrompida da cópia ativa, aguardará até que o arquivo de log que atende aos requisitos de geração de log exigidos máximo é copiado inspecionado e, em seguida, patches a página corrompida. Depois que a página tiver sido corrigida, retoma a reprodução de log. O processo é o mesmo para a cópia do banco de dados com retardamento, exceto pelo fato do banco de dados com retardamento primeiro repete todos os arquivos de log que são necessários para alcançar um estado de patches.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p118">In case of corruption in a passive database copy, including a lagged database copy, because these copies are always behind their active copy, it is always safe to copy any page from the active copy to a passive copy. A passive database copy is by nature highly available, so during the page patching process, log replaying is suspended, but log copying continues. The passive database copy retrieves a copy of the corrupted page from the active copy, waits until the log file which meets the maximum required log generation requirement is copied and inspected, and then patches the corrupt page. Once the page has been patched, log replay resumes. The process is the same for the lagged database copy, except that the lagged database first replays all log files that are necessary to achieve a patchable state.</span></span> 

## <a name="mailbox-replication-service"></a><span data-ttu-id="3f8e7-190">Serviço de replicação de caixa de correio</span><span class="sxs-lookup"><span data-stu-id="3f8e7-190">Mailbox Replication Service</span></span> 
<span data-ttu-id="3f8e7-p119">Mover caixas de correio é uma parte importante do gerenciamento de um serviço de email em grande escala. Sempre são atualizadas tecnologias e atualizações de hardware e a versão para lidar com, para ter uma robusta acelerado sistema que permite que nossos engenheiros realizar isso funcione enquanto mantém a caixa de correio move transparente para os usuários (, certificando-se de que eles permanecem on-line ao longo do processo) é a chave e certificando-se de que o processo dimensiona normalmente como obtém de caixas de correio maiores.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p119">Moving mailboxes is a key part of managing a large-scale email service. There are always updated technologies and hardware and version upgrades to deal with, so having a robust, throttled system that enables our engineers to accomplish this work while keeping the mailbox moves transparent to users (by making sure they stay online throughout the process) is key and making sure that the process scales up gracefully as mailboxes get larger and larger.</span></span> 

<span data-ttu-id="3f8e7-p120">O serviço de replicação de caixa de correio do Exchange (MRS) é responsável por mover caixas de correio entre bancos de dados. Durante a movimentação, MRS executa uma verificação de consistência em todos os itens dentro da caixa de correio. Se for encontrado um problema de consistência, MRS irá corrigir o problema, ou ignorar os itens corrompidos, removendo assim a corrupção da caixa de correio.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p120">The Exchange Mailbox Replication Service (MRS) is responsible for moving mailboxes between databases. During the move, MRS performs a consistency check on all items within the mailbox. If a consistency issue is found, MRS will either correct the problem, or skip the corrupted items, thereby removing the corruption from the mailbox.</span></span> 

<span data-ttu-id="3f8e7-p121">Como MRS é um componente do Exchange Online, podemos pode fazer alterações em seu código endereço novos formulários de corrupção que forem detectados no futuro. Por exemplo, se podemos detectar um problema de consistência MRS não é possível corrigir, podemos analisar a corrupção, altere o código do MRS e corrigir a inconsistência (se conseguimos compreender como).</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p121">Because MRS is a component of Exchange Online, we can make changes in its code to address new forms of corruption that are detected in the future. For example, if we detect a consistency issue that MRS is not able to fix, we can analyze the corruption, change the MRS code and correct the inconsistency (if we understand how to).</span></span> 

## <a name="log-file-checks"></a><span data-ttu-id="3f8e7-198">Verificações de arquivo de log</span><span class="sxs-lookup"><span data-stu-id="3f8e7-198">Log File Checks</span></span> 
<span data-ttu-id="3f8e7-p122">Todos os arquivos de log de transação gerados por um banco de dados do Exchange são submetidos a diversas formas de verificações de consistência. Quando um arquivo de log é criado, a primeira coisa concluído é um padrão de bit é gravado e, em seguida, uma série de gravações de log é executada. Isso permite que o Exchange Online executar uma série de verificações (flush perdida, CRC e outras verificações) para validar cada arquivo de log, conforme ele está escrito e outra quando ele é replicado.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p122">All transaction log files generated by an Exchange database undergo several forms of consistency checks. When a log file is created, the first thing done is a bit pattern is written and then a series of log writes is performed. This enables Exchange Online to execute a series of checks (lost flush, CRC and other checks) to validate each log file as it is written, and again as it is replicated.</span></span> 

## <a name="deployment-on-resilient-file-system"></a><span data-ttu-id="3f8e7-202">Implantação no sistema de arquivos resiliente</span><span class="sxs-lookup"><span data-stu-id="3f8e7-202">Deployment on Resilient File System</span></span> 
<span data-ttu-id="3f8e7-p123">Para ajudar a evitar corrupção ocorra no nível do sistema de arquivos, o Exchange Online está sendo implantado nas partições de sistema de arquivos resiliente (ReFS) para fornecer recursos aprimorados de recuperação. ReFS é um sistema de arquivos no Windows Server 2012 e posterior é projetado para ser mais resiliente contra corrupção de dados, maximizando assim, integridade e disponibilidade de dados. Especificamente, ReFS traz aprimoramentos da maneira que metadados é atualizado que oferece melhor proteção de dados e reduz casos de corrupção de dados. Ele também usa somas de verificação para verificar a integridade dos dados de arquivo e garantir que corrupção de dados de metadados está facilmente encontrado e reparado.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p123">To help prevent corruption from occurring at the file system level, Exchange Online is being deployed on Resilient File System (ReFS) partitions to provide improved recovery capabilities. ReFS is a file system in Windows Server 2012 and later that is designed to be more resilient against data corruption thereby maximizing data availability and integrity. Specifically, ReFS brings improvements in the way that metadata is updated which offers better protection for data and reduces data corruption cases. It also uses checksums to verify the integrity of file data and metadata ensuring that data corruption is easily found and repaired.</span></span> 

<span data-ttu-id="3f8e7-207">O Exchange Online aproveita vários benefícios ReFS:</span><span class="sxs-lookup"><span data-stu-id="3f8e7-207">Exchange Online takes advantage of several ReFS benefits:</span></span> 
- <span data-ttu-id="3f8e7-p124">Mais resiliência em integridade dos dados significa menos incidentes de corrupção de dados. Redução do número de incidentes de corrupção significa menos repropagações de desnecessários do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p124">More resiliency in data integrity means fewer data corruption incidents. Reducing the number of corruption incidents means fewer unnecessary database reseeds.</span></span> 
- <span data-ttu-id="3f8e7-210">Soma de verificação em execução em metadados habilitando detecções de casos de corrupção mais cedo e forma mais determinista, permitindo-nos corrigir os dados do cliente corrupção antes de cinza falhas nos volumes de dados.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-210">Checksum running on metadata enabling detections of corruption cases sooner and more deterministically, allowing us to fix customer data corruption before grey failures occur on data volumes.</span></span>
- <span data-ttu-id="3f8e7-211">Projetado para funcionar bem com conjuntos de dados muito grandes — petabytes e maior — sem impacto no desempenho</span><span class="sxs-lookup"><span data-stu-id="3f8e7-211">Designed to work well with extremely large data sets—petabytes and larger—without performance impact</span></span>
- <span data-ttu-id="3f8e7-212">Suporte para outros recursos usados pelo Exchange Online, como criptografia de disco BitLocker.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-212">Support for other features used by Exchange Online, such as BitLocker encryption.</span></span> 

<span data-ttu-id="3f8e7-213">O Exchange Online também se beneficia de outros recursos ReFS:</span><span class="sxs-lookup"><span data-stu-id="3f8e7-213">Exchange Online also benefits from other ReFS features:</span></span> 
- <span data-ttu-id="3f8e7-p125">**Integridade (fluxos de integridade)** - ReFS armazena dados de forma que protege de muitos dos erros comuns que normalmente podem causar perda de dados. Pesquisa do Office 365 usa fluxos de integridade para ajudá-lo com detecção de corrupção de disco antecipada e somas de verificação de conteúdo do arquivo. Esse recurso também reduz incidentes de corrupção causadas por "Rasgado grava" (quando uma operação de gravação não for concluída devido à falta de energia, etc.).</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p125">**Integrity (Integrity Streams)** - ReFS stores data in a way that protects it from many of the common errors that can normally cause data loss. Office 365 Search uses Integrity Streams to help with early disk corruption detection and checksums of file content. The feature also reduces corruption incidents caused by “Torn Writes” (when a write operation does not complete due to power outages, etc.).</span></span> 
- <span data-ttu-id="3f8e7-p126">**Disponibilidade (residual)** - ReFS prioriza a disponibilidade dos dados. Historicamente, sistemas de arquivos com frequência eram suscetíveis a corrupção de dados que exigiria a ficar offline para reparo do sistema. Embora seja rara, se ocorrer corrupção, implementa ReFS resgatar, um recurso que remove os dados corrompidos do namespace em um volume ao vivo e garante que os dados bons não são afetados negativamente por dados corrompidos não pode ser reparado. Aplicando o recurso residual e isolando corrupção de dados para o Exchange Online volumes de banco de dados significam que podemos pode manter os bancos de dados não é afetado em um volume corrompido Íntegro entre o momento de ação de corrupção e reparar. Isso aumenta a disponibilidade dos bancos de dados que normalmente seriam afetados por esses problemas de corrupção do disco.</span><span class="sxs-lookup"><span data-stu-id="3f8e7-p126">**Availability (Salvage)** - ReFS prioritizes the availability of data. Historically, file systems were often susceptible to data corruption that would require the system to be taken offline for repair. Although rare, if corruption does occur, ReFS implements salvage, a feature that removes the corrupt data from the namespace on a live volume and ensures that good data is not adversely affected by non-repairable corrupt data. Applying the Salvage feature and isolating data corruption to Exchange Online database volumes means that we can keep non-affected databases on a corrupted volume healthy between the time of corruption and repair action. This increases the availability of databases that would normally be affected by such disk corruption issues.</span></span> 